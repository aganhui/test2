---
{"dg-publish":true,"permalink":"/01-diary//v0-1/","title":"工作流嵌套方案-v0.1"}
---



# 1 Background
工作流需要实现嵌套功能，一个工作流可以包含一个或多个工作流。在工作流中引用别的工作流的方式跟引用云函数的方式类似，即将工作流结点拖动到当前工作流下，并选择引用工作流的版本号。(通过工作流嵌套可以实现多人协同开发工作流)

实现的工作流效果如下
![Pasted image 20230707124222.png|500](/src/site/img/user/08-Assets/Pasted%20image%2020230707124222.png)

# 2 Work
前端：
1. 工作流工作区也要有工作流库，可以拖拽进来
2. 工作流节点的显示可以Fold/Unfold
3. 工作流任务显示问题：一个工作流运行会触发多个工作流任务，每个工作流都能显示总体进度，也能将工作流展开（显示工作流日志、云函数进度、云函数日志）
4. 子工作流只读，若更改需要跳转到子工作流编辑页面新建版本

后端：
1. 工作流中的结点类型包括工作流结点，为该类型配置特定的解释器和方法
2. 将前端dag转为后端实际执行的dag时，需要将嵌套的工作流中的函数融合到最后的工作流中⭐【后续升级】

# 3 Phase 1️⃣
前端：
1. 工作流工作区也要有工作流库，可以拖拽进来
2. 工作流节点的显示可以Fold/Unfold
3. 子工作流只读，若更改需要跳转到子工作流编辑页面新建版本
【产品】

后端：
1. 工作流中的结点类型包括工作流结点，为该类型配置特定的解释器和方法

# 4 Phase 2️⃣
前端
1. 工作流任务显示问题：一个工作流运行会触发多个工作流任务，每个工作流都能显示总体进度，也能将工作流展开（显示工作流日志、云函数进度、云函数日志）
后端
1. 将前端dag转为后端实际执行的dag时，需要将嵌套的工作流中的函数融合到最后的工作流中⭐【后续升级】

# 5 Phase 3️⃣



